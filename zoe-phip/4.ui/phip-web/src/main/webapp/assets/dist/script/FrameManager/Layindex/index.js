define("modules/FrameManager/Layindex/index",["./req","./menu","./mainMenu","./propMenu","./userUpdatePwd"],function(a,b,c){var d={top:common.getTopWindowDom(),req:a("./req").req,menu:a("./menu"),updatePwd:a("./userUpdatePwd"),dataMenu:null,init:function(){d.getMenuList(),d.buildMenu(!0,d.dataMenu),d.SafeExit(),d.togglePopMenu(),d.UpdateUserPwd(),d.top.msgTip=function(a,b){common.jsmsg(a,b)}},getMenuList:function(){d.req.getMenuList(function(a){d.dataMenu=a})},buildMenu:function(a,b){null!=b&&d.menu.init(a,b)},setPopMenuHeight:function(){var a=.6*$(window).height(),b=0;$("#popMenu .list-box .y-layout-menu").each(function(){$(this).height()>b&&(b=$(this).height())}),a>b&&(a=b),$("#popMenu .list-box .y-layout-menu").height(b),$("#popMenu .pop-box").height(a)},togglePopMenu:function(){var a=$("#popMenu"),b=$("#btnPaograms"),c=$("#btnPopClose");b.click(function(c){b.hasClass("active")?(a.hide(),b.removeClass("active")):(a.show(),$("#popMenu hr.y-line").hide(),b.addClass("active"),d.setPopMenuHeight(),a.find(".link").click(function(){a.hide(),b.removeClass("active")})),c.stopPropagation()}),$(document).click(function(c){$(c.target).hasClass("pop-menu")||(a.hide(),b.removeClass("active"))}),c.click(function(){a.hide(),b.removeClass("active")})},SafeExit:function(){$("#exit").click(function(){$.ligerDialog.confirm("是否安全退出？",function(a){a&&(window.location.href=webRoot+"frame/loginout",$.cookie("home-link",""),$.cookie("home-menu-navid",""))})})},UpdateUserPwd:function(){$("#LoginName").on("click",function(){var a={modal:!0,title:"用户密码修改",url:webRoot+"SystemUser/UserPwd",width:400,height:300,buttons:[{text:"确认",onclick:function(){d.top.win_update_user_password()}},{text:"取消",onclick:function(a,b){b.close()}}]};$.ligerDialog.open(a)})}};window.togglePopMenu=function(){d.togglePopMenu()},b.init=function(){d.init()}});