define("modules/UtilityModule/SelectList/list",["{staticDir}/BaseSelectList/baseSelectList"],function(a,b,c){var d=a("{staticDir}/BaseSelectList/baseSelectList"),e={options:null,top:common.getTopWindowDom(),defaultParam:{winName:"",title:"",width:560,height:600,url:"/select/view/list",isAllowEmptySelect:!1,emptyMsg:"请选择相应的列表数据!",fkNullContent:"",selectParam:null,callback:null},invoke:function(a,b){e.options=b,e.getFn(a,function(){var b=$.extend(!0,{},e.defaultParam,e.fn[a],e.options),c=$.extend(!0,{},e.fn[a].selectParam,e.options.selectParam);e.top.win_select_list_param=c,e.top[b.winName]=common.dialog({title:b.title,url:b.url,width:b.width,height:b.height,buttons:[{text:"确定",onclick:function(a,c){if("function"==typeof b.callback){var d=e.top[b.selectParam.winCallback]();if(b.isAllowEmptySelect||d.length>0)b.callback(d),c.close();else if(0==d.length){var f=b.emptyMsg;e.top.common.jsmsgError(f)}}}},{text:"取消",onclick:function(a,b){b.close()}}]})})},dialog:function(a,b){e.options=b;var c=b.target,d=b.name,f=b.fkObj,g=b.displayField;$('input[name="'+d+'"]').on("setValue",function(a,e){b.selectParam.selfId=e.id,$(c).find("input").val(e[d]),e[f]?$(c).find(".text-line-content").text(e[f][g]):e[d]&&!e[f]&&$(c).find(".text-line-content").text(b.fkNullContent)}),$(c).on("click",function(){e.getFn(a,function(){var b=$.extend(!0,{},e.defaultParam,e.fn[a],e.options),f=$.extend(!0,{},e.fn[a].selectParam,e.options.selectParam);f.stroage=function(){var a=[],b=$('input[name="'+d+'"]').val(),e=$(c).find(".text-line-content").text();if(b&&e){var g={},h=f.valueField,i=f.displayField;g[h]=b,g[i]=e,a.push(g)}return a}(),e.top.win_select_list_param=f;var g=b.buttonsExtend||[],h=[{text:"确定",onclick:function(a,d){if("function"==typeof b.callback){var g=e.top[b.selectParam.winCallback]();if(b.isAllowEmptySelect||g.length>0)b.callback(g),d.close();else if(0==g.length){var h=b.emptyMsg;e.top.common.jsmsgError(h)}}else{var i=function(a){if(b.isAllowEmptySelect||a.length>0){var g=f.valueField,h=f.displayField;a.length>0?($('input[name="'+b.name+'"]').val(a[0][g]),$(c).find(".text-line-content").text(a[0][h])):($('input[name="'+b.name+'"]').val(""),$(c).find(".text-line-content").text("")),d.close()}else if(0==a.length){var i=b.emptyMsg;e.top.common.jsmsgError(i)}},g=e.top[b.selectParam.winCallback]();i(g)}}},{text:"取消",onclick:function(a,b){b.close()}}];$.each(h,function(a,b){g.push(b)}),e.top[b.winName]=common.dialog({title:b.title,url:b.url,width:b.width,height:b.height,buttons:g})})})},init:function(){var a=$.extend(!0,{},e.top.win_select_list_param),b=new d(a);e.top[a.winCallback]=function(){var a=b.getSelected();return a}},fn:{},getFn:function(a,b){seajs.use("{dir}/UtilityModule/SelectList/options/"+a,function(c){e.fn[a]=c[a],"function"==typeof b&&b()})}};b.invoke=function(a,b){e.invoke(a,b)},b.dialog=function(a,b){e.dialog(a,b)},b.init=function(){e.init()}});