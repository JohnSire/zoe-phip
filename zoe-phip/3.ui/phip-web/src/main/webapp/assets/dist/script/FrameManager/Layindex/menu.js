define("modules/FrameManager/Layindex/menu",["./mainMenu","./propMenu"],function(a,b,c){var d={mainMenu:a("./mainMenu"),propMenu:a("./propMenu"),init:function(a,b){d.buildMenu(a,b),d.mainPageResize();var c=setTimeout(function(){d.mainPageResize(),d.popMenuTreeResize()},100);clearTimeout(c)},popMenuTreeResize:function(){var a=$("#popMenu .list-box .y-layout-menu").outerWidth(),b=$("#popMenu .list-box .y-layout-menu").length*a,c=$(window).width();if(b>c){var e=Math.floor(c/a);e>0&&(a*=e)}else a=b;$("#popMenu .pop-box").width(a),"block"==$("#popMenu").css("display")&&d.setPopMenuHeight()},mainPageResize:function(){$("#mainNav").show();var a=$("body").height()-$("#header").outerHeight()-$("#footer").outerHeight()-$("#mainNav").outerHeight()-2;$("#main,#sidebarNav,#sidebarNav .y-layout-menu").css({height:a})},setPopMenuHeight:function(){var a=.6*$(window).height(),b=0;$("#popMenu .list-box .y-layout-menu").each(function(){$(this).height()>b&&(b=$(this).height())}),a>b&&(a=b),$("#popMenu .list-box .y-layout-menu").height(b),$("#popMenu .pop-box").height(a)},buildMenu:function(a,b){d.loadMenuTree(a,b)},loadMenuTree:function(a,b){var c=!1;1==arguments.length&&a&&(c=!0);var e=d.GetMenuHtml(b);$("#sidebarNav").html(e),$("#popMenu .list-box").html(e);var f=$("#popMenu .list-box").find(".menu-title").show();$(f).each(function(){var a=$(this).attr("title");$(this).text(a)}),d.mainMenu.init(c),d.propMenu.init(),d.onLink();var g=$.cookie("home-link"),h=$.cookie("home-menu-navid"),i=$.cookie("home-menu-mainNav"),j=$.cookie("home-menu-navid");if(j&&$("#popMenu a[navid="+j+"]").addClass("active"),g){if($("#sidebarNav").find(".active").removeClass("active"),$("#sidebarNav").find("[navid='"+h+"']").addClass("active"),void 0!=$("#sidebarNav").find("[navid='"+h+"']").parents("#menu-li-a").children("a").attr("href")&&$("#sidebarNav").find("[navid='"+h+"']").parents(".list").addClass("active"),$("#mainNav").find("[navid='"+i+"']").addClass("active"),$("#mainNav").find("[navid='"+i+"']").click(),h){var k=$("#sidebarNav").find("[navid='"+h+"']").closest(".y-layout-menu"),l=$("#sidebarNav").find(".y-layout-menu").index(k);$("#mainNav").find("li").removeClass("active").eq(l).addClass("active").click()}frames.mainframe.location.href=g}else $($("#sidebarNav").find("[href]")[0]).click()},onLink:function(){$(".y-layout-menu .link").each(function(){$(this).on("click",function(){var a=$(this).attr("href"),b=$(this).attr("navid");a&&d.linkCookie(a,b),$("#popMenu .link").removeClass("active"),$("#popMenu .link[navid="+$.cookie("home-menu-navid")+"]").addClass("active"),$("#popMenu").hide(),$("#btnPaograms").removeClass("active")})})},linkCookie:function(a,b){frames.mainframe.location.href=a,$.cookie("home-link",a),$.cookie("home-menu-navid",b)},GetMenuHtml:function(a){var b="";if(a.result&&a.result.length>0)for(var c=0;c<a.result.length;c++){if(b+="<div class='y-layout-menu'>",b+="<h1 class='menu-title' title="+a.result[c].name+"></h1>",null!=a.result[c].children&&a.result[c].children.length>0){b+="<div class='list-wrap'>";for(var d=0;d<a.result[c].children.length;d++){if(b+="<ul class='lists clearfix' class='lists clearfix'>",b+="<li class='list' id='menu-li-a'> ",b+="<a class='link' navid='"+a.result[c].children[d].id+"' href="+webRoot+a.result[c].children[d].address+" target='mainframe'>"+a.result[c].children[d].name+"</a><hr class='y-line' />",null!=a.result[c].children[d].children&&a.result[c].children[d].children.length>0){b+="<ul class='lists clearfix'>";for(var e=0;e<a.result[c].children[d].children.length;e++)b+="<li class='list'><a class='link' navid='"+a.result[c].children[d].children[e].id+"' href="+webRoot+a.result[c].children[d].children[e].address+" target='mainframe'>"+a.result[c].children[d].children[e].name+"</a><hr class='y-line' /></li>";b+="</ul>"}b+="</li>",b+="</ul>"}b+="</div>"}b+="</div>"}return b}};b.init=function(a,b){d.init(a,b)}});