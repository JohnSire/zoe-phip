define("modules/SystemManager/SysMenuAcc/buildMenuAccGrid",[],function(a,b,c){var d={delIds:"",del:a("../../baseGrid/req").req,init:function(){d.buildGrid()},grid:null,catalogId:"",buildGrid:function(){var a=$.extend(!0,{},d.gridParam());a.url=webRoot+"/menu/getMenuCfg",$("#catalogGrid").removeAttr("ligeruiid").empty(),d.grid=$("#catalogGrid").ligerGrid(a)},loadData:function(a){d.grid&&(d.catalogId=a,d.grid.setParm("catalogId",a),d.grid.loadData())},gridParam:function(){var a={checkbox:!1,dataAction:"server",delayLoad:!0,tree:{columnId:"id",columnName:"name",idField:"id",parentIDField:"fkParentMenuId"},columns:[{display:"菜单名称",name:"name",isSort:!1,align:"left"},{display:"授权时间",name:"createAt",width:120,isSort:!1,align:"left",type:"date"},{display:"授权人",name:"createBy",width:150,isSort:!1,align:"left"},{display:"状态",name:"state",width:71,align:"center",render:function(a,b,c){return 1==c?"<span>启用</span>":"<span style='color:red;'>禁用</span>"}},{display:"操作",name:"keyCode",isSort:!1,width:60,align:"center",render:function(a,b,c){var d="";return d+="<a class='icon-grid icon-grid-del' title='取消关联' onclick='javascript:delMenu(\""+a.competenceId+'","'+b+"\")'></a> "}}],width:"100%",height:"49.5%",heightDiff:29,usePager:!1};return a},delMenu:function(a,b){var c=b?"是否删除该菜单及下级菜单权限关联?":"是否删除该菜单权限关联?";$.ligerDialog.confirm(c,function(b){if(b){var c=new Request("/menu/delMenuAcc");c.post({data:{ids:a},success:function(a){d.loadData(d.catalogId)}})}})},recursiveGetIds:function(a){if(""==d.delIds?d.delIds=a.CompetenceId:d.delIds+=","+a.CompetenceId,a.children)for(var b in a.children)d.recursiveGetIds(a.children[b],d.delIds)}};b.init=function(){d.init()},window.delMenu=function(a,b){var c=liger.get("catalogGrid"),e=c.getRow(b),f=!!e.children;d.delIds="",d.recursiveGetIds(e);var g=d.delIds;d.delMenu(g,f)},b.clientEvent=function(){d.clientEvent()},b.loadData=function(a){d.loadData(a)}});