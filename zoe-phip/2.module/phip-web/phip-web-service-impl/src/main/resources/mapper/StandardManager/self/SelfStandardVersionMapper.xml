<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zoe.phip.web.dao.sdm.IStandardVersionMapper">
<resultMap id="MultiResultMap" type="com.zoe.phip.web.model.sdm.StandardVersion" extends="BaseResultMap">

</resultMap>
    <update id="defaultUpdate" parameterType="com.zoe.phip.web.model.sdm.StandardVersion">
    update PHIP_STANDARD_VERSION
    <set>
        <if test="code != null">
            CODE = #{code,jdbcType=VARCHAR},
        </if>
        <if test="name != null">
            NAME = #{name,jdbcType=VARCHAR},
        </if>
        <if test="downloadUrl != null">
            DOWNLOAD_URL = #{downloadUrl,jdbcType=VARCHAR},
        </if>
        <if test="version != null">
            VERSION = #{version,jdbcType=VARCHAR},
        </if>
        <if test="pid != null">
            PID = #{pid,jdbcType=VARCHAR},
        </if>
        <if test="identification != null">
            IDENTIFICATION = #{identification,jdbcType=DECIMAL},
        </if>
        <if test="uploadStatus != null">
            UPLOAD_STATUS = #{uploadStatus,jdbcType=DECIMAL},
        </if>
        <if test="descr != null">
            DESCR = #{descr,jdbcType=VARCHAR},
        </if>
        <if test="state != null">
            STATE = #{state,jdbcType=DECIMAL},
        </if>
        MODIFY_AT=sysdate
</set>
        where id = #{id}
        </update>
    <select id="getSingleVersion" parameterType="java.util.Map" resultType="java.lang.Integer">
        SELECT COUNT (1) from PHIP_STANDARD_VERSION PSV
        WHERE UPPER (PSV.CODE) = UPPER (#{code, jdbcType=VARCHAR})
        <if test="_parameter.containsKey('id')">
            AND PSV.id != #{id, jdbcType=VARCHAR}
        </if>
    </select>
    <select id="getDataPageList" resultType="com.zoe.phip.web.model.sdm.StandardVersion">
        SELECT PSV.*,PSCI.NAME
        FROM PHIP_STANDARD_VERSION PSV,
        PHIP_STANDARD_VER_RS_CDA PSVRC,
        PHIP_STANDARD_VER_RS_SET PSVRS,
        PHIP_STANDARD_VER_RS_FIELD PSVRF,
        PHIP_STANDARD_VER_RS_DICT PSVRD,
        PHIP_ST_CDA_INFO PSCI,
        PHIP_ST_SET_INFO PSSI,
        PHIP_ST_RS_SET_ELEMENT_INFO PSRSEI,
        PHIP_NATIONAL_STANDARDS PNS
        WHERE 1=1 AND PSV.ID=PSVRC.FK_VERSION_ID
    </select>

    <insert id="versionStandardStruct" parameterType="java.util.List">

    </insert>
</mapper>